{% extends "base.html" %}
{% block pagecontent %}
	<br/>
	<style>
	td{border-top: 0px !important;font-size:14px; }
	.roundBorder,td div{border:1px solid #000000; border-radius:8px;box-shadow: 0 -1px 0 rgba(0, 0, 0, 0.4) inset, 0 1px 10px rgba(0, 0, 0, 0.4);}
	.negative{border:1px solid #FF0000 !important;padding:0 20px 0 20px;}
	.positive{border:1px solid #00FF00 !important;padding:0 20px 0 20px;}
	.rightAlign{text-align:right !important;}
	.fontBold{font-weight:Bold;font-size:14px !important;}
	.colortd{background:#dadada;font-weight:Bold;font-size:14px;}
	.fontSize{font-size:14px !important;}
	</style>

	
<div style="padding-left:30px;padding-right:30px;">
	<div style="padding:30px;border:2px solid;width:70%;border-radius:20px;background:#ffffff">
		<legend style="text-align:center">Report</legend>
		
		<div>
		{% if UserList%}
		<form method="post">{% csrf_token %}
		<select name="drpUser">
			<option value="0">-- Please Select -- </option>
			{% for user in UserList%}
				{% if user.user_id == drpUser%}
					<option value="{{user.user_id}}" selected="true">{{user.firstname}}</option>
				{%else%}
					<option value="{{user.user_id}}">{{user.firstname}}</option>
				{%endif%}
			{%endfor%}
		</select>
		<input type="Submit" value="Fetch" class="btn btn-inverse"/>
		</form>
		{%endif%}
		</div>	
		{% if error %}
		<div class="alert alert-error">{{error}}</div>
		{% endif%}
		{% if reports%}
		<table class="table" width="100%">
			<thead>
				<tr style="background:#dadada;box-shadow: 0 -1px 0 rgba(0, 0, 0, 0.4) inset, 0 1px 15px rgba(0, 0, 0, 0.4);">
					<th  width="40%" style="padding-left:40px;">Quality</th>
					<th  width="15%" class="rightAlign">Self-assessment</th>
					<th  width="15%" class="rightAlign">Others(Average)</th>
					<th  width="15%" class="rightAlign" style="padding-right:40px;">Difference</th>
				</tr>
			</thead>
			
			<tbody>
			{% for objReport in reports %}
				{% if objReport.status == 'Scale' %}
					<tr  style="padding:10px;padding-bottom:20px;">
						<td colspan="5">
							{%if objReport.answerYourself <= objReport.answerOther%}
								<div class="positive">
							{%else%}
								<div class="negative">
							{%endif%}
							<table  width="100%">
								<tr>	
									<td  width="40%" colspan="2"><label  class="fontBold">{{objReport.header}}</label></td>
									<td  width="15%" class="rightAlign">{{objReport.answerYourself}}</td>
									<td  width="15%" class="rightAlign">{{objReport.answerOther}}</td>
									<td  width="15%" class="rightAlign">{{objReport.total}}</td>
								</tr>
							</table>
							</div>	
						</td>
					</tr>
				{% endif %}
				{% if objReport.status == 'MCQ' %}
					<tr style="padding:10px;padding-bottom:20px;">
						<td colspan="5">
						{%if objReport.mcqSelfCount <= objReport.mcqOtherCount%}
								<div class="positive">
							{%else%}
								<div class="negative">
							{%endif%}
								<table width="100%">
									<tr>
										<td  width="100%" ><label  class="fontBold">{{objReport.header}}</label></td>
										<td class="rightAlign">{{objReport.total}}</td>
									</tr>
									<tr>
										<td colspan="2">
											<table width="100%">
												{% for option in objReport.options %}
														<tr>
															<td width="40%" style="border-top: 0px"><label>{{option.option_text}}</label></td>
													
															{% if objReport.answerYourself == option.option_id %}
																<td width="15%" class="rightAlign" style="border-top: 0px;"><i class="icon-ok"></i></td>
															{% else %}
																<td width="15%" class="rightAlign" style="border-top: 0px;"><label>&nbsp;</label></td>
															{% endif %}
													
															{% if option.option_count == 0 %}
																<td width="15%" class="rightAlign" style="border-top: 0px;"><label>&nbsp;</label></td>
															{% else %}
																<td width="15%" class="rightAlign" style="border-top: 0px;">{{option.option_count}}</td>
															{% endif %}
															<td width="15%">&nbsp;</td>
														</tr>
												{% endfor %}
												
											</table>
										</td>
									</tr>
								</table>
							</div>	
						</td>
					</tr>
				{% endif %}
			{% endfor %}
			
			
			
			<tr><td><br/>
			<legend style="margin-bottom:5px !important;">Index</legend>
				<table class="roundBorder">
					<tr>
						<td width="50%" class="colortd" >Maximun Possible</td>
						<td style="padding-right:20%;" class="rightAlign">100.00</td>
					</tr>
					<tr>
						<td class="colortd">Self-Appraisal</td>
						<td style="padding-right:20%;" class="rightAlign">{{selfTotal|floatformat:"2"}}</td>
					</tr>
					<tr>
						<td class="colortd">Others</td>
						<td style="padding-right:20%;" class="rightAlign">{{othersTotal|floatformat:"2"}}</td>
					</tr>
			
				</table>
			</td></tr>
			<tr style="padding:10px;padding-bottom:20px;">
				<td colspan="4">
					<br/><br/>
					 <legend style="margin-bottom:0px;">Comments</legend> 
				</td>
			</tr>
			{% for objReport in reports %}
				{% if objReport.status == 'Subjective' %}
					<tr  style="padding:10px;padding-bottom:20px;">
						<td  width="40%" colspan="4">
							<div>
							<table width="100%">
								<tr style="background:#dadada"><td class="fontBold">{{objReport.header}}</td></tr>
								<tr><td><label class="fontBold">Yourself :</label> <label class="fontSize">{{objReport.answerYourself}}</label></td></tr>
								<tr><td><label class="fontBold">Others : </label><label class="fontSize">{{objReport.answerOther|linebreaksbr}}</label></td></tr>
							</table>
							</div>
						</td>
					</tr>
				{% endif %}
			{% endfor %}
			</tbody>	
		</table>
		{%endif%}
		
	</div>
	
</div>
	
	
{% endblock %}
