{% extends "base.html" %}
{% load url from future %}

{% block pagecontent %}

<script type="text/javascript">
	function paging(pageNum, saveType)
	{
		if(saveType == 'paging')
		{
			console.log("Page Number : " + pageNum);
			$('#formAppraisal').attr('action', '/question/' + pageNum + '/');
		}
		else if(saveType == 'save')
		{
			$('#formAppraisal').attr('action', '/question/' + pageNum + '/save');
		}
		$('#formAppraisal').submit();
	}
	
	$(function(){
		$('.control').hover(function(event){
			$(event.currentTarget).addClass('controlHover');
		},
		function(event){
			$(event.currentTarget).removeClass('controlHover');
		});
	});
	
	/* User Instuctions */
	options = {};
	
	$(function(){
		$('#userInstructions').click(function(){
			$('#userInstructions').popover({
				placement : 'bottom', 
				title : 'Navigation info',
				html : true,
				content : '{{ userInstructions }}'
			});
		});
		
		$('#userInstructions').popover({
			placement : 'bottom', 
			title : 'Navigation info',
			html : true,
			content : '{{ userInstructions }}'
		});
		$( "#userInstructions" ).effect("bounce", options, 1000, callback );
	});
	
	function callback() {
		$( "#userInstructions" ).removeAttr( "style" );
	};
	
	/*setTimeout(function(){
		//$( "#userInstructions" ).effect("Clip", options, 500, callback );
		//$('#userInstructions').addClass('hide');
	}, 5000)*/	
	
</script>

<form id="formAppraisal" action="/question/{{ AppraisalContents.question_order }}/" method="post" style="margin-left: -5px; margin-right: 5px;" >{% csrf_token %}
	<div style="width: 100%;">
		<div class="WelcomeMessage">
			You are appraising 
			<sapn class="badge badge-inverse" style="font-size:15px; font-style: italic;">{{ appraisee.firstname }} {{ appraisee.lastname }} 
			</sapn>
		</div>
		<div id="userInstructions" class="userInstructions"><p style="margin-left: 15px; margin-top: 1px; margin-bottom: 1px; margin-right: 10px;">Instructions</p></div>
	</div>
	<div style="width: 100%; margin-bottom: 20px;">
		<div class="beforeQuestion control" onclick="paging({{ previousPageNumber }}, 'paging')">
			<div style="height: 45%;"></div>
			<p class="NavsTextLeft">Previous</p>
		</div>
		<div class="midDiv" style="float: left; margin-left: -1px;"></div>
		<div class="afterQuestion control" onclick="paging({{ nextPageNumber }}, 'paging')">
			<div style="height: 45%;"></div>	
			<p class="NavsTextRight">Next</p>
		</div>
		<div class="midDiv" style="float: right;"></div>
		<div class="outterQuestion">
			<div id="questionid" name="questionid" class="questionNum">
				<div class="InnerQuesNum">Question {{ AppraisalContents.question_order }}</div>
			</div>
			<div id="question" name="question" style="padding: 10px 5px 5px 5px; height: 78%;">	
				<div class="questionHeader">
					<p class="questionHeaderText">{{ AppraisalContents.question.info }}</p>
				</div>
				<div class="questionContent">
					<p class="questionContentText">{{ AppraisalContents.question.question }}</p>
				</div>
			</div>
		</div>
	</div>
	<div class="AnswerMessage">
		<p class="AnswerMessageLabel">Your answer</p>
	</div>
	<a href="/userAppraisal/appraise/{{ appraisee.user_id }}">
		<div class="QuestionListButton control">
			<div style="height: 45%;"></div>
			<p style="padding-left: 18%;">Questions</p>
		</div>
	</a>
	<div class="AnswerBlock">
		{% block Answer %}
		{% endblock %}
	</div>
	<div id="save" class="AppraisalDoneButton control" onclick="paging({{ AppraisalContents.question_order }}, 'save')">
		<div style="height: 45%;"></div>
		<p style="padding-left: 30%;">Save</p>
	</div>
	<input type="hidden" name="qustnNmbr" value="{{ AppraisalContents.question_order }}" >
	<div class="pagination pagination-centered pageNumber" style="float: left;">
		<ul>
			<li><a pageNumber="/question/{{ previousPageNumber }}/" onclick="paging({{ previousPageNumber }}, 'paging')">&laquo;</a></li>	
			{% for page in pages %}				
				<li><a pageNumber="/question/{{ page.question_order }}" onclick="paging({{ page.question_order }}, 'paging')">{{ page.question_order }}</a></li>
			{% endfor %}
			<li><a pageNumber="/question/{{ nextPageNumber }}/" onclick="paging({{ nextPageNumber }}, 'paging')">&raquo;</a></li>
		</ul>
	</div>
</form>

{% endblock %}