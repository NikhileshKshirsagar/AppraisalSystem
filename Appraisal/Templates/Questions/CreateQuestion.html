{% extends "base.html" %}
{% block pagecontent %}
 <script>
$(function() {
	$( "#tabs" ).tabs().addClass( "ui-tabs-vertical ui-helper-clearfix" );
	$("#tabs").removeClass("ui-widget-content");
	$( "#tabs li" ).removeClass( "ui-corner-top" ).addClass( "ui-corner-left" );
	$("#tabs-1, #tabs-2").removeClass("ui-widget-content");
	$("#btnPlus").click(function(){
		if($("#sortable li").length <= 10)	
			$("#sortable").append("<li class=\"ui-state-default\">"+$("#sortable li:first").html()+"</li>");
		else
			alert("Cannot have more than 10 options");
	});
	
	$("#btnMinus").click(function(){
		if($("#sortable li").length > 1)
			$("#sortable li:last").remove();
	});
	
	$('*[name=liQuestionType]').click(function(){
		if($("#tabs-2").css('display')=="block")
		{
			$("#tabs-1").css('display','block');
		}
		$("input[name=type_text]").val($(this).attr("value"));
		if ($("input[name=type_text]").val() == 'MCQ')
		{
			if( $("input[name=option_text]").val()!="")
			{		
				arroptions = $("input[name=option_text]").val().split(",");
				$.each(arroptions, function(index,value)
				{
					$( "#sortable li:last input[name=options]" ).val(value);
					$("#btnPlus").trigger('click');
				}
				);
				$("#btnMinus").trigger('click');
			} 
		}
		else
		{
			$("input[name=option_text]").val("");
			$("#sortable li:gt(0)").remove();
			$("#sortable li input").val("");
		}
		
	});

	$("#CreateQuestion").click(function(){
		var data="";
		$( "input[name=options]" ).each(function( index ) {
			data = data + $(this).val() +',';
		});
		data = data.slice(0,-1);
		$("input[name=option_text]").val(data);
	});
	
	if ($("input[name=type_text]").val() == 'MCQ')
	{
		$("*[name=liQuestionType]").each(function(){
			if( $(this).attr('value') == 'MCQ')
				$(this).trigger('click');
		});
	}
	
	
	LoadSlider($( "#questionLevel" ).get("selector"),  $( "#questionLevelVal" ).get("selector"), 10, 0, {{questionCreateform.level.value}} );
	LoadSlider($( "#questionWeight" ).get("selector"),  $( "#questionWeightVal" ).get("selector"), 10, 0, {{questionCreateform.weight.value}} );

});
</script>
<style>
	.ui-tabs-vertical { width: 55em; }
	.ui-tabs-vertical .ui-tabs-nav { padding: .2em .1em .2em .2em; float: left; }
	.ui-tabs-vertical .ui-tabs-nav li { clear: left; width: 100%; border-bottom-width: 1px !important; border-right-width: 0 !important; margin: 0 -1px .2em 0; }
	.ui-tabs-vertical .ui-tabs-nav li a { display:block; }
	.ui-tabs-vertical .ui-tabs-nav li.ui-tabs-active { padding-bottom: 0px; padding-right: .1em; border-right-width: 1px; border-right-width: 1px; }
	.ui-tabs-vertical .ui-tabs-panel { padding: 1em; float: right; width: 40em;}
	.ui-state-active, .ui-widget-content .ui-state-active, .ui-widget-header .ui-state-active{background:#E3E8E4 !important;}
</style>
<div class="label headerGradient headerPosition" >
		<i class="icon-question-sign icon-3x" style="float: left; padding-left: 20px; padding-top: 4px"></i>
		<p class=" headerFont" style="float: left; padding-top: 15px">Create question</p>
</div>
<br/><br/>
<form method="post" class="form-search">{% csrf_token %}
<div id="tabs">
	 <ul>
	    {%for value, text in questionCreateform.type.field.choices %}
    		<li><a value={{text}} name="liQuestionType" href="#tabs-{{value}}">{{text}}</a></li>
		{% endfor %}
	</ul>
	{{questionCreateform.type_text}}
	<div >
	<table><tr><td>
	<table id="tabs-1" class="table tableDisplay" style="margin-left:5px;" Common="true">
	<!-- <tr>
		<td>
			{{ questionCreateform.type.label }}	
		</td>
		<td>
			 {{ questionCreateform.type}}
		</td>
		<td>
		
		</td>
	</tr> -->
	<tr class="">
		<td width="300px">
			{{ questionCreateform.question.label }}	
		</td>
		<td width="400px">
			{{ questionCreateform.question }}
		</td>
		<td>
		</td>
	</tr>
	
	<tr>
		<td>
			{{ questionCreateform.intent.label }}	
		</td>
		<td>
			 {{ questionCreateform.intent}}
		</td>
		<td>
		
		</td>
	</tr>
	<tr class="">
		<td>
			{{ questionCreateform.level.label }}	
		</td>
		<td>
			<div id="questionLevel" class="sliders"></div>
		</td>
		<td>
			<input name="level" id="questionLevelVal" class="sliderValue" type="text">
		</td>
	</tr>
	<tr class="">
		<td>
			{{ questionCreateform.weight.label }}	
		</td>
		<td>
			<div id="questionWeight" class="sliders"></div>
		</td>
		<td>
			<input name="weight" id="questionWeightVal" class="sliderValue" type="text">
		</td>
	</tr>
	<tr>
		<td>
			{{ questionCreateform.info.label }}	
		</td>
		<td>
			{{ questionCreateform.info }}
		</td>
		<td>
		</td>
	</tr>
	<tr>
		<td colspan="3">
			<input id="CreateQuestion" type="submit" value="Create" class="btn btn-medium btn-inverse">
		</td>
	</tr>
	</table>
	</td>
	<td style="vertical-align:top;">
		<table id="tabs-2" width="100%">
		<tr>
			<td>OPTIONS</td>
		</tr>
		<tr>
		<td>{% include "Questions\CreateOptions.html" %}</td>
		</tr>
		<tr><td>&nbsp;</td></tr>
		</table>
	</td>
	</tr>
	
	</table>
			
	{% if questionCreateform.errors|length > 0 %}
	<div class="alert alert-error"> 
		{% for key, value in questionCreateform.errors.items %} 
			{{value}}
		{% endfor %}
	</div>
{% endif %}
{% if optionCreateform.errors|length > 0 %}
	<div class="alert alert-error"> 
		{% for key, value in optionCreateform.errors.items %} 
			{{value}}
		{% endfor %}
	</div>
{% endif %}
		
<p>{{ successMsg }}</p>
	</div>

	
	
	
</div>

</form>
{% endblock %}